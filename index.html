<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird JS - Berserk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aldrich&family=Exo+2:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
	<!-- 1. MÀN HÌNH ĐĂNG NHẬP/ĐĂNG KÝ (Mới) -->
    <!-- Đặt cái này lên đầu tiên trong body để nó hiện trước -->
    <div id="authScreen" class="screen active">
        <div class="menu-overlay"></div>
        <div class="auth-container">
            <h1 class="auth-title">BERZERK FLAPPY</h1>
            
            <div id="loginForm">
                <input type="text" id="loginUser" placeholder="Username" autocomplete="off">
                <input type="password" id="loginPass" placeholder="Password">
                <div class="auth-actions">
                    <button id="btnLogin" class="menu-btn large">Login</button>
                    <button id="btnSwitchToReg" class="menu-btn secondary">Register</button>
                </div>
            </div>

            <div id="registerForm" style="display: none;">
                <input type="text" id="regUser" placeholder="Choose Username" autocomplete="off">
                <input type="password" id="regPass" placeholder="Choose Password">
                <div class="auth-actions">
                    <button id="btnRegister" class="menu-btn large">Create Account</button>
                    <button id="btnSwitchToLogin" class="menu-btn secondary">Back to Login</button>
                </div>
            </div>
            <p id="authMessage" class="auth-msg"></p>
        </div>
    </div>
	
    <!-- 2. MENU SCREEN (Sửa đổi) -->
    <!-- Xóa class "active" ở đây vì authScreen sẽ hiện trước -->
    <div id="menuScreen" class="screen">
        <video id="menuBgVideo" autoplay loop muted playsinline>
            <source src="assets/videos/menu_bg.mp4" type="video/mp4">
        </video>
        <div class="menu-overlay"></div>
        <div class="menu-content">
            <div class="menu-left">
                <!-- Thêm id để hiển thị tên người chơi -->
                <h1 class="menu-title">BERZERK</h1> 
                <div class="player-greeting">Welcome, <span id="displayUsername">Guest</span></div>
                
                <nav class="menu-nav">
                    <button id="playButton" class="menu-btn large">Play</button>
                    <button id="collectionButton" class="menu-btn">Collection</button>
                    <button id="profileButton" class="menu-btn">Profile</button>
                    <button id="logoutButton" class="menu-btn">Logout</button> <!-- Thay Exit bằng Logout -->
                </nav>
            </div>
            <div class="menu-right">
                <div class="top-right-elements">
                    <span class="quest-indicator">QUESTS</span>
                </div>
                <div class="booster-packs">0 BOOSTER PACKS</div>
            </div>
        </div>
    </div>
    <!-- COLLECTION SCREEN -->
    <div id="collectionScreen" class="screen">
 
        <div class="menu-overlay"></div>
        
        <div class="collection-content">
            <h2 class="collection-title">ARSENAL</h2>
            
            <div class="collection-body">
                <!-- Cột chọn Chim -->
                <div class="collection-column">
                    <h3>DRAGON SKINS</h3>
                    <div class="skin-grid" id="birdGrid">

                    </div>
                </div>
    <div class="collection-column">
        <h3>OBSTACLES</h3>
        <div class="skin-grid" id="pipeGrid"></div>
    </div>
                <!-- Cột chọn Map -->
                <div class="collection-column">
                    <h3>REALMS</h3>
                    <div class="skin-grid" id="mapGrid">
                  
                    </div>
                </div>
            </div>

            <button id="collectionBackBtn" class="menu-btn">Back to Menu</button>
        </div>
    </div>
	<div id="profileScreen" class="screen">
        <div class="menu-overlay"></div>
        <div class="collection-content"> <!-- Tận dụng lại style của collection-content -->
            <h2 class="collection-title">PILOT DATA</h2>
            <div class="profile-card">
                <div class="profile-info">
                    <h3>Name: <span id="profileName">---</span></h3>
                    <h3>High Score: <span id="profileBest">0</span></h3>
                    <h3>Total Games: <span id="profileGames">0</span></h3>
                </div>
            </div>
            <button id="profileBackBtn" class="menu-btn">Back to Menu</button>
        </div>
    </div>
    <div id="gameScreen" class="screen">
        <video id="gameBgVideo" loop muted playsinline>
            <source src="assets/videos/game_bg.mp4" type="video/mp4">
        </video>

        <canvas id="gameCanvas"></canvas>

        <button id="pauseButton" class="game-button" aria-label="Pause">
            <svg class="pause-icon" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false">
                <rect x="6" y="5" width="4" height="14" rx="1.5"></rect>
                <rect x="14" y="5" width="4" height="14" rx="1.5"></rect>
            </svg>
        </button>

        <div id="scoreDisplay" class="score-display">Score: 0</div>

        <!-- pause overlay (single copy) -->
        <div id="pauseOverlay" class="overlay">
            <div class="pause-panel">
                <h2>Paused</h2>
                <ul class="pause-menu" role="menu" aria-label="Pause menu">
                    <li><button id="resumeButton" class="pause-item" role="menuitem">Resume Game</button></li>
                    <li><button id="exitToMenuButton" class="pause-item" role="menuitem">Back to Main Menu</button></li>
                </ul>
                <p class="pause-hint">Press <kbd>Esc</kbd> to resume</p>
            </div>
        </div>

        <!-- 4. GAME OVER OVERLAY (Sửa đổi) -->
    <div id="gameOverOverlay" class="overlay">
        <div class="gameover-wrap">
            <div class="gameover-title">
                <span class="go-line go-game">WHY YOU</span>
                <span class="go-line go-over">SO NOOB?</span>
            </div>
            
            <!-- Khu vực điểm số -->
            <div class="score-board">
                <div class="score-item">
                    <span>SCORE</span>
                    <span id="finalScore" class="score-val">0</span>
                </div>
                <div class="score-item">
                    <span>BEST</span>
                    <span id="finalBestScore" class="score-val high-val">0</span>
                </div>
            </div>
            <div id="newRecordMsg" class="new-record" style="display:none">NEW RECORD!</div>

            <div class="gameover-actions">
                <button id="retryButton" class="go-btn">Continue</button>
                <button id="gameOverExitButton" class="go-btn secondary">Exit to Menu</button>
            </div>
        </div>
    </div>
    

    <script src="script.js"></script>
</body>
</html>